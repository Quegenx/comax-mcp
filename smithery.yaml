version: 1
startCommand:
  type: stdio
  configSchema:
    type: object
    properties:
      orderNumber:
        type: string
        title: "Order Number"
        description: "Comax order number"
      docYear:
        type: string
        title: "Document Year"
        description: "Document year for the order"
      reference:
        type: string
        title: "Reference"
        description: "Order reference number"
      customerId:
        type: string
        title: "Customer ID"
        description: "Comax customer ID"
        default: "22222"
  commandFunction: |-
    (config) => ({
      "command": "node",
      "args": ["dist/index.js"],
      "env": {
        "NODE_ENV": "production"
      }
    })

# Optional deployment configuration
deploy:
  strategy: rolling
  replicas: 1
  update_config:
    order: start-first
    failure_action: rollback
    delay: 10s
  rollback_config:
    failure_action: pause
    max_failure_ratio: 0
    monitor: 5m
    order: stop-first
    parallelism: 1

monitoring:
  endpoints:
    - path: /health
      interval: 30s
      timeout: 5s 